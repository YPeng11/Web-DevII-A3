<p>edit-event works!</p>
<div class="edit-modal-overlay" (click)="onCancel()">
  <div class="edit-modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Edit Event</h3>
      <button class="close-btn" (click)="onCancel()">&times;</button>
    </div>

    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="edit-form">
      <div class="form-group">
        <label for="name">Event Name *</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          [class.error]="editForm.get('name')?.invalid && editForm.get('name')?.touched"
        >
        <div *ngIf="editForm.get('name')?.invalid && editForm.get('name')?.touched" class="error-message">
          Event name is required and must be at least 3 characters long
        </div>
      </div>

      <div class="form-group">
        <label for="date">Event Date *</label>
        <input
          type="datetime-local"
          id="date"
          formControlName="date"
          class="form-control"
          [class.error]="editForm.get('date')?.invalid && editForm.get('date')?.touched"
        >
        <div *ngIf="editForm.get('date')?.invalid && editForm.get('date')?.touched" class="error-message">
          Event date is required
        </div>
      </div>

      <div class="form-group">
        <label for="location">Location *</label>
        <input
          type="text"
          id="location"
          formControlName="location"
          class="form-control"
          [class.error]="editForm.get('location')?.invalid && editForm.get('location')?.touched"
        >
        <div *ngIf="editForm.get('location')?.invalid && editForm.get('location')?.touched" class="error-message">
          Location is required
        </div>
      </div>

      <div class="form-group">
        <label for="category_id">Category *</label>
        <select
          id="category_id"
          formControlName="category_id"
          class="form-control"
          [class.error]="editForm.get('category_id')?.invalid && editForm.get('category_id')?.touched"
        >
          <option value="">Select a category</option>
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </option>
        </select>
        <div *ngIf="editForm.get('category_id')?.invalid && editForm.get('category_id')?.touched" class="error-message">
          Category is required
        </div>
      </div>

      <div class="form-group">
        <label for="target_price">Target Price</label>
        <input
          type="number"
          id="target_price"
          formControlName="target_price"
          class="form-control"
          step="0.01"
          min="0"
        >
      </div>

      <div class="form-group">
        <label for="ticket_price">Ticket Price</label>
        <input
          type="number"
          id="ticket_price"
          formControlName="ticket_price"
          class="form-control"
          step="0.01"
          min="0"
        >
      </div>

      <div class="form-group">
        <label for="detail">Event Details *</label>
        <textarea
          id="detail"
          formControlName="detail"
          class="form-control"
          rows="4"
          [class.error]="editForm.get('detail')?.invalid && editForm.get('detail')?.touched"
        ></textarea>
        <div *ngIf="editForm.get('detail')?.invalid && editForm.get('detail')?.touched" class="error-message">
          Event details are required
        </div>
      </div>

      <!-- 错误信息 -->
      <div *ngIf="error" class="error-message form-error">
        {{ error }}
      </div>

      <!-- 按钮 -->
      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="onCancel()"
          [disabled]="loading"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="editForm.invalid || loading"
        >
          {{ loading ? 'Updating...' : 'Update Event' }}
        </button>
      </div>
    </form>
  </div>
</div>